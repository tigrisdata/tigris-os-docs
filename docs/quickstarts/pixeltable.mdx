# Pixeltable Quickstart

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

Pixeltable contains a storage integration for Tigris as of
[version 0.5.0](https://github.com/pixeltable/pixeltable/releases/tag/v0.5.0).
This allows you to store your structured data in Pixeltable and have references
to unstructured multimodal data in Tigris.

In order to configure Pixeltable to use Tigris, you need to set the following
environment variables or make changes to the configuration file in
`~/.pixeltable/config.toml`:

<Tabs>
  <TabItem value="config" label="Configuration file" default>

```toml
[pixeltable]
# The location where new media files are stored when they are added to tables.
input_media_dest = "s3://contoso-data/input"
# The location where media files are stored when they are generated by Pixeltable operations.
output_media_dest = "s3://contoso-data/output"
# The name of the AWS configuration profile that is configured for accessing Tigris.
tigris_profile = "tigris"
```

  </TabItem>
  <TabItem value="env" label="Environment variables">

| Environment variable           | Example                    | Description                                                                                                                              |
| :----------------------------- | :------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------- |
| `PIXELTABLE_TIGRIS_PROFILE`    | `tigris`                   | The name of the [AWS configuration profile](/docs/sdks/s3/aws-cli/#using-multiple-aws-profiles) that is configured for accessing Tigris. |
| `PIXELTABLE_INPUT_MEDIA_DEST`  | `s3://contoso-data/input`  | The location where new media files are stored when they are added to tables.                                                             |
| `PIXELTABLE_OUTPUT_MEDIA_DEST` | `s3://contoso-data/output` | The location where media files are stored when they are generated by Pixeltable operations.                                              |

  </TabItem>
</Tabs>

Then when you insert a video into a table:

```py
import pixeltable as pxt

videos = pxt.create_table(
    "content",
    schema={
        "video": pxt.Video,
        "title": pxt.String,
    },
    if_exists="ignore",
)

videos.insert(
    [
        {
            "video": "./var/big-buck-bunny.mp4",
            "title": "Big Buck Bunny",
        },
    ]
)
```

Pixeltable will automatically upload the media file to Tigris.

If you create an image with the
[OpenAI `image_generation` user-defined function](https://docs.pixeltable.com/sdk/v0.5.1/openai#udf-image-generations),
the generated image will automatically be uploaded to Tigris:

```py
import pixeltable as pxt
from pixeltable.functions import openai

pxt.drop_table("wallpapers")
wallpapers = pxt.create_table(
    "wallpapers",
    schema={
        "text": pxt.String,
    },
    if_exists="ignore",
)

wallpapers.insert(
    [
        {"text": "A surrealist oil on canvas painting of a taco dancing in a datacentre"}
    ]
)

wallpapers.add_computed_column(
    gen_image=openai.image_generations(wallpapers.text, model='dall-e-2')
)
```

You can then browse the generated images in Tigris.
